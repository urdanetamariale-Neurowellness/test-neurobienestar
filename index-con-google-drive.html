<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Test de Neurobienestar RESPIRAR - Descubre tu mapa personal de bienestar">
    <title>Test de Neurobienestar | Neurowellness Learning</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #F7F4F1;
            color: #4A4D53;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .card {
            background: white;
            border-radius: 1.5rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
       .header-gradient {
    background: #14233A;
    color: white;
    padding: 3rem 2rem;
    border-radius: 1.5rem 1.5rem 0 0;
    text-align: center;
}
        .subtitle {
            color: #E9C8C8;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        
        .tagline {
            color: #E9C8C8;
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        h1, h2 {
            color: #14233A;
            font-weight: 700;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 1rem;
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }
        
        .welcome-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #4A4D53;
            margin-bottom: 1.5rem;
        }
        
        .highlight-box {
            background: #E9C8C8;
            border-left: 4px solid #9B6D80;
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1.5rem 0;
        }
        
        .info-box {
            background: #F7F4F1;
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1.5rem 0;
        }
        
        .info-box h3 {
            color: #14233A;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .info-list {
            list-style: none;
            padding: 0;
        }
        
        .info-list li {
            padding: 0.75rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }
        
        .info-list li:before {
            content: "‚óè";
            color: #D99A8F;
            font-weight: bold;
            flex-shrink: 0;
            margin-top: 0.2rem;
        }
        
        .scale-item {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .scale-number {
            font-weight: bold;
            color: #14233A;
            min-width: 2rem;
        }
        
        .question-card {
            background: white;
            border: 2px solid #E6E2DE;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s;
        }
        
        .question-card:hover {
            border-color: #9B6D80;
            box-shadow: 0 4px 12px rgba(155, 109, 128, 0.1);
        }
        
        .question-number {
            background: #E9C8C8;
            color: #14233A;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        
        .question-text {
            color: #14233A;
            font-weight: 500;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: flex-start;
            font-size: 1.05rem;
            line-height: 1.6;
        }
        
        .scale-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.75rem;
            margin-top: 1rem;
        }
        
        .scale-option {
            text-align: center;
        }
        
        .scale-option input[type="radio"] {
            display: none;
        }
        
        .scale-option label {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 4rem;
            padding: 0.75rem 0.5rem;
            border: 2px solid #E6E2DE;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.8rem;
            background: white;
            text-align: center;
            line-height: 1.3;
        }
        
        .scale-option input[type="radio"]:checked + label {
            background: #9B6D80;
            border-color: #9B6D80;
            color: white;
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(155, 109, 128, 0.3);
        }
        
        .scale-option label:hover {
            border-color: #9B6D80;
            transform: translateY(-2px);
        }
        
        .btn {
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-align: center;
        }
        
        .btn-primary {
            background: #9B6D80;
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(155, 109, 128, 0.3);
            background: #8a5c6f;
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: white;
            color: #14233A;
            border: 2px solid #E6E2DE;
        }
        
        .btn-secondary:hover {
            background: #F7F4F1;
        }
        
        .progress-container {
            background: #E6E2DE;
            height: 0.5rem;
            border-radius: 1rem;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }
        
        .progress-bar {
            background: #9B6D80;
            height: 100%;
            transition: width 0.5s ease;
        }
        
        .section-header {
            background: #14233A;
            color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .section-subtitle {
            opacity: 0.9;
            font-size: 1rem;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-group label {
            display: block;
            color: #14233A;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }
        
        .input-group input {
            width: 100%;
            padding: 0.875rem;
            border: 2px solid #E6E2DE;
            border-radius: 0.75rem;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #D99A8F;
        }
        
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: left;
        }
        
        .flex-gap {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem 0.5rem;
            }
            
            h1 {
                font-size: 1.75rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .scale-container {
                gap: 0.5rem;
                grid-template-columns: 1fr;
            }
            
            .scale-option label {
                padding: 1rem;
                font-size: 0.9rem;
                min-height: auto;
            }
            
            .btn {
                padding: 0.875rem 1.5rem;
                font-size: 1rem;
            }
        }
      /* ---- Mostrar las opciones de respuesta en una fila horizontal ---- */
.scale-container {
  display: flex;
  justify-content: space-between;
  gap: 0.75rem;
  margin-top: 1rem;
  flex-wrap: nowrap;
}

.scale-option {
  flex: 1 1 0;
  text-align: center;
}
      /* ---- Alinear el texto de las afirmaciones a la izquierda ---- */
.question-text {
  text-align: left;
  margin-bottom: 1rem;
}
/* --- Logo lateral durante las secciones del test --- */
.section-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 1.5rem;
  flex-wrap: wrap;
  text-align: left;
}

.section-header img.logo-lateral {
  max-height: 70px;
  width: auto;
  height: auto;
  flex-shrink: 0;
}
/* --- Encabezado azul para cada pilar del test --- */
.test-pilar-header {
  background: #14233A;
  color: white;
  border-radius: 1rem;
  padding: 1.5rem;
  display: flex;
  align-items: center;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  text-align: left;
}

.test-pilar-header img.logo-lateral {
  max-height: 60px;
  height: auto;
  width: auto;
  flex-shrink: 0;
}

.test-pilar-header h2 {
  margin: 0;
  font-size: 1.4rem;
  font-weight: 700;
  color: white;
}

.test-pilar-header p {
  margin: 0.25rem 0 0;
  color: #E9C8C8;
  font-size: 0.95rem;
  line-height: 1.4;
}


    </style>
</head>
<body>
    <div class="container">
        <!-- Pantalla de Bienvenida √önica -->
        <div id="welcomeScreen">
            <div class="card" style="border-radius: 1.5rem; overflow: hidden; padding: 0;">
             <div class="header-gradient">
    <img src="https://i.postimg.cc/0NtNP44W/Logo-Neuro-Wellness-Blanco-1.png"
         alt="Logo NeuroWellness"
         style="max-width: 200px; height: auto; display: block; margin: 10px auto 0;" />
    
    <p class="tagline" style="font-size: 1.2rem; margin-top: 0.25rem; color: #F0D6D0; font-weight: 500;">
        Tu mapa hacia el bienestar integral
    </p>
</div>

                <div style="padding: 2.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem;">
                        <span style="font-size: 2rem; text-align: center"></span>
                        <h2>¬°Bienvenida a tu Test de Neurobienestar!</h2>
                    </div>

                    <div style="space-y: 1.5rem; text-align: left;">
                        <p class="welcome-text">
                            Este no es un examen. Es una <strong>conversaci√≥n contigo misma</strong>, un momento para pausar, observar y reconocer d√≥nde est√°s ahora.
                        </p>

                        <p class="welcome-text">
                            En los pr√≥ximos minutos, vas a explorar cuatro dimensiones fundamentales de tu bienestar: 
                            tu capacidad de acci√≥n, tu claridad de prop√≥sito, tu equilibrio emocional y la calidad de 
                            tus relaciones.
                        </p>

                        <div class="highlight-box">
                            <p style="color: #14233A; font-weight: 500;">
                                ‚ù§Ô∏è No hay respuestas correctas o incorrectas. Solo tu verdad en este momento.
                            </p>
                        </div>

                        <p class="welcome-text">
                            Al finalizar, recibir√°s un mapa personalizado que te mostrar√° tus fortalezas actuales 
                            y las √°reas donde puedes crecer.
                        </p>

                        <p class="welcome-text">
                            Responde las preguntas que encontrar√°s a continuaci√≥n con la mayor sinceridad posible. Requerir√°s de 8 a 10 minutos para completar el test.
                        </p>

                        <div class="input-group" style="margin-top: 2rem;">
                            <label for="userName">Tu nombre: <span style="color: #EF4444;">*</span></label>
                            <input type="text" id="userName" placeholder="Escribe tu nombre" required>
                        </div>

                        <div class="input-group">
                            <label for="userEmail">Tu correo electr√≥nico: <span style="color: #EF4444;">*</span></label>
                            <input type="email" id="userEmail" placeholder="tu@email.com" required>
                        </div>

                        <p style="color: #9B6D80; font-size: 0.9rem; margin-bottom: 1rem;">
                            * Campos obligatorios
                        </p>

                        <button class="btn btn-primary" onclick="validateAndStartTest()" style="width: 100%; margin-top: 1rem;">
                            Iniciar Test
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pantalla del Test -->
        <div id="testScreen" class="hidden">
            <div class="card">
                <div style="margin-bottom: 1.5rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; color: #9B6D80; font-size: 0.9rem;">
                        <span>Pilar <span id="currentPilar">1</span> de 4</span>
                        <span><span id="answeredCount">0</span>/<span id="totalQuestions">11</span></span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                </div>

              <div id="questionsContainer"></div>


 
      


                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button class="btn btn-secondary" onclick="previousPilar()" id="prevBtn" style="display: none;">
                        ‚Üê Anterior
                    </button>
                    <button class="btn btn-primary" onclick="nextPilar()" id="nextBtn" style="flex: 1;">
                        Siguiente ‚Üí
                    </button>
                </div>
            </div>
        </div>

      

                   
    </div>
<!-- Pantalla de Resultados -->
<div id="resultsScreen" class="hidden">
  <div style="max-width:1100px;margin:0 auto;background:white;border-radius:1.5rem;box-shadow:0 4px 12px rgba(0,0,0,0.08);overflow:hidden;">

    <!-- Header con puntuaci√≥n -->
    <div style="background:#14233A;padding:3rem 2rem;text-align:center;">
      <img src="https://i.postimg.cc/0NtNP44W/Logo-Neuro-Wellness-Blanco-1.png"
           alt="Logo NeuroWellness"
           style="max-width:200px;height:auto;display:block;margin:0 auto 1rem;" />
      <h2 style="color:#E9C8C8;margin-bottom:1rem;">Resultados del Test de Neurobienestar</h2>

      <h1 style="font-size:1.6rem;font-weight:700;margin-bottom:0.75rem;color:white;">
        <span id="userNameDisplay"></span>, aqu√≠ est√° tu Mapa de Neurobienestar
      </h1>
      <p style="color:#E9C8C8;margin-bottom:2rem;">Tu punto de partida para la transformaci√≥n</p>

      <div style="background:#E9C8C8;padding:1.5rem;border-radius:1rem;max-width:520px;margin:0 auto;">
        <p style="font-size:0.9rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:#14233A;margin-bottom:0.5rem;">Puntuaci√≥n Total</p>
        <p style="font-size:3rem;font-weight:800;color:#14233A;">
          <span id="totalScore">0</span><span style="font-size:1.2rem;opacity:.7;">/100</span>
        </p>
        <p style="font-size:.9rem;color:#2B2E33;margin-bottom:1rem;">puntos de neurobienestar</p>
        <div id="overallMessage" style="border-top:2px solid #14233A;padding-top:1rem;margin-top:.5rem;text-align:left;"></div>
      </div>
    </div>

    <!-- Contenido principal resultados -->
    <div style="padding:3rem 2rem;">

      <!-- Radar -->
      <div style="background:#F7F4F1;border-radius:1rem;padding:2rem;margin-bottom:2rem;">
        <h2 style="font-size:1.8rem;font-weight:700;text-align:center;color:#14233A;margin-bottom:2rem;">Tus 4 Pilares de Neurobienestar</h2>
        <div style="display:flex;justify-content:center;margin-bottom:2rem;padding:2rem;">
          <canvas id="radarChart" style="max-width:600px;max-height:600px;width:100%;"></canvas>
        </div>

        <div style="text-align:center;font-size:.9rem;color:#4A4D53;margin-bottom:1.5rem;">
          <p style="font-weight:600;margin-bottom:1rem;">Cada pilar se eval√∫a de 0 a 25 puntos</p>
          <div style="display:flex;justify-content:center;gap:2rem;flex-wrap:wrap;">
            <div style="display:flex;align-items:center;gap:.5rem;"><div style="width:1.25rem;height:1.25rem;background:#9DB2A2;border-radius:.25rem;"></div><span style="font-weight:500;">19‚Äì25: Fortaleza</span></div>
            <div style="display:flex;align-items:center;gap:.5rem;"><div style="width:1.25rem;height:1.25rem;background:#D6C79A;border-radius:.25rem;"></div><span style="font-weight:500;">13‚Äì18: Oportunidad</span></div>
            <div style="display:flex;align-items:center;gap:.5rem;"><div style="width:1.25rem;height:1.25rem;background:#D99A8F;border-radius:.25rem;"></div><span style="font-weight:500;">0‚Äì12: Prioridad</span></div>
          </div>
        </div>

        <!-- Tarjetas resumen por pilar -->
        <div id="pilarSummaries" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;"></div>
      </div>

      <!-- Instrucci√≥n -->
      <div style="text-align:center;background:#E9C8C8;padding:1.5rem;border-radius:1rem;margin-bottom:2rem;">
        <p style="font-size:1.05rem;font-weight:600;color:#14233A;">A continuaci√≥n, haz clic sobre cada pilar para ver a detalle lo que significan tus resultados:</p>
      </div>

      <!-- Detalle expandible -->
      <div id="detailedAnalysis"></div>

      <!-- CTA -->
      <div style="background:#14233A;color:white;padding:2rem;border-radius:1rem;text-align:center;margin-top:2rem;">
        <h3 style="font-size:1.4rem;font-weight:800;margin-bottom:1rem;color:white;">
          <span id="ctaName"></span>, has dado el primer paso m√°s importante: conocer tu mapa
        </h3>
        <div style="max-width:600px;margin:0 auto 1.5rem;">
          <p style="font-size:1rem;margin-bottom:1rem;color:#E9C8C8;line-height:1.6;">
            Ahora tienes 2 opciones: guardar estos resultados y seguir con los mismos patrones, o transformarlos en un plan de acci√≥n con acompa√±amiento profesional.
          </p>
          <div style="background:rgba(233,200,200,.15);border:2px solid #9B6D80;border-radius:.75rem;padding:1rem;margin-bottom:1rem;text-align:left;">
            <div style="display:flex;align-items:flex-start;gap:1rem;">
              <span style="font-size:1.5rem;">‚è∞</span>
              <div>
                <p style="font-weight:800;margin-bottom:.25rem;color:white;">Las pr√≥ximas 72 horas son clave</p>
                <p style="font-size:.9rem;color:#E9C8C8;">La motivaci√≥n del autoconocimiento dura poco sin estructura. No dejes que estos insights se pierdan.</p>
              </div>
            </div>
          </div>
        </div>

        <div style="display:flex;flex-direction:column;gap:1rem;max-width:500px;margin:0 auto;">
          <button class="btn" onclick="window.open('https://calendly.com/tu-enlace-calendly', '_blank')" style="background:#9B6D80;color:white;padding:1rem 2rem;border-radius:.75rem;font-weight:600;font-size:1rem;width:100%;cursor:pointer;border:none;">
            S√≠, quiero mi Sesi√≥n de Valoraci√≥n Gratuita
          </button>
          <button class="btn" onclick="descargarPDF()" style="background:#E9C8C8;color:#14233A;padding:1rem 2rem;border-radius:.75rem;font-weight:600;font-size:1rem;width:100%;cursor:pointer;border:2px solid #9B6D80;">
            üìÑ Descargar resultados en PDF
          </button>
        </div>

        <p style="font-size:.9rem;color:#E9C8C8;margin-top:1rem;">‚è∞ Solo 3 sesiones disponibles esta semana</p>
      </div>
      <!-- FIN del CTA azul -->

      <!-- Cr√©ditos + firma con fondo BLANCO -->
      <div style="background:white;margin-top:2rem;padding:2rem;border-radius:1rem;">
        <div style="width:100%;text-align:center;margin-bottom:1rem;">
          <img src="https://i.postimg.cc/Pf95fxbZ/Firma-Neuro-Wellness-Mariale-Urdaneta-7.png"
               alt="Firma Mariale Urdaneta - NeuroWellness"
               style="width:100%;max-width:1100px;height:auto;display:block;margin:0 auto;" />
        </div>

        <div style="max-width:600px;margin:0 auto;padding-top:1rem;border-top:1px solid #E6E2DE;">
          <p style="font-size:.75rem;margin-bottom:.5rem;color:#4A4D53;text-align:center;">¬© 2025 Maria Alejandra Urdaneta. Todos los derechos reservados.</p>
          <p style="font-size:.75rem;line-height:1.5;color:#4A4D53;text-align:center;">Este test y su metodolog√≠a son propiedad intelectual protegida. Prohibida su reproducci√≥n total o parcial sin autorizaci√≥n expresa.</p>
        </div>

        <!-- Bot√≥n Reiniciar centrado -->
        <div style="text-align:center;margin-top:2rem;">
          <button class="btn btn-primary" onclick="restartTest()" style="padding:1rem 2rem;border-radius:.75rem;font-weight:600;font-size:1rem;background:#9B6D80;color:white;border:none;cursor:pointer;max-width:400px;width:100%;">
            Reiniciar Test
          </button>
        </div>
      </div>


    </div>
  </div>
</div>

    <script>
        // Definici√≥n de preguntas por pilar (44 preguntas - 220 puntos totales)
        const questions = {
            impulso: [
                { text: "Cuando algo me importa, empiezo sin esperar el 'momento perfecto'", inverted: false },
                { text: "A menudo pospongo tareas importantes aunque s√© que deber√≠a hacerlas", inverted: true },
                { text: "Conf√≠o en mi capacidad para completar proyectos incluso con obst√°culos", inverted: false },
                { text: "Tengo energ√≠a f√≠sica suficiente para mi d√≠a a d√≠a", inverted: false },
                { text: "Cuando estoy cansada, me cuesta priorizar el descanso sobre la productividad", inverted: true },
                { text: "Hago actividad f√≠sica que disfruto al menos 2-3 veces por semana", inverted: false },
                { text: "He intentado crear rutinas de ejercicio/alimentaci√≥n pero las abandono", inverted: true },
                { text: "Me doy permiso de avanzar incluso con miedo a equivocarme", inverted: false },
                { text: "Busco activamente retos que me saquen de mi zona de confort", inverted: false },
                { text: "Cuando fallo en algo, lo intento de nuevo ajustando mi estrategia", inverted: false },
                { text: "Necesito estar constantemente haciendo algo √∫til para sentirme valiosa", inverted: true }
            ],
            focus: [
                { text: "Siento claridad sobre lo que da sentido profundo a mi vida", inverted: false },
                { text: "Siento que voy en 'piloto autom√°tico' sin direcci√≥n clara", inverted: true },
                { text: "Puedo traer mi atenci√≥n al presente cuando me disperso", inverted: false },
                { text: "Cuando logro concentrarme, disfruto tanto que el tiempo vuela", inverted: false },
                { text: "Me cuesta identificar qu√© es lo m√°s importante entre muchas tareas", inverted: true },
                { text: "Planifico mis comidas/snacks para mantener energ√≠a estable", inverted: false },
                { text: "A menudo termino mis d√≠as sintiendo que he estado muy ocupada en cosas sin importancia", inverted: true },
                { text: "Tengo metas claras y espec√≠ficas para este a√±o que me entusiasman", inverted: false },
                { text: "Siento que avanzo consistentemente hacia mis objetivos importantes", inverted: false },
                { text: "Cuando como, realmente saboreo y disfruto mi comida en lugar de comer distra√≠da", inverted: false }
            ],
            balance: [
                { text: "Puedo identificar lo que siento sin juzgarme", inverted: false },
                { text: "Me cuesta 'desconectarme' despu√©s de un d√≠a estresante", inverted: true },
                { text: "Uso t√©cnicas de respiraci√≥n/pausas para calmarme", inverted: false },
                { text: "Ignoro se√±ales de tensi√≥n en mi cuerpo hasta que es inevitable parar", inverted: true },
                { text: "Duermo 7-8 horas y me levanto descansada la mayor√≠a de d√≠as", inverted: false },
                { text: "Cuando las cosas salen mal, tiendo a buscar culpables en lugar de soluciones", inverted: true },
                { text: "Puedo sentir emociones dif√≠ciles sin necesidad de distraerme inmediatamente", inverted: false },
                { text: "Me culpo por situaciones que estaban fuera de mi control", inverted: true },
                { text: "Cuando algo no sale como esperaba, me quedo atrapada pensando en el 'por qu√©' en lugar de pasar a la acci√≥n", inverted: true },
                { text: "Me permito descansar y disfrutar del ocio sin sentir que 'pierdo el tiempo'", inverted: false },
                { text: "Incorporo actividades placenteras en mi rutina semanal de forma consciente", inverted: false }
            ],
            influencia: [
                { text: "Cuando digo 'no', me siento culpable o doy excusas", inverted: true },
                { text: "Puedo expresar opiniones diferentes con respeto", inverted: false },
                { text: "Modifico mi comportamiento para agradar o evitar conflictos", inverted: true },
                { text: "En conversaciones tensas, mantengo la calma", inverted: false },
                { text: "En redes sociales, me comparo frecuentemente con los logros de otros", inverted: true },
                { text: "Soy consciente de c√≥mo mi tono y postura afectan la comunicaci√≥n", inverted: false },
                { text: "Puedo considerar situaciones desde el punto de vista de otras personas", inverted: false },
                { text: "Al final de conversaciones importantes, clarifico los siguientes pasos", inverted: false },
                { text: "Celebro mis logros y progresos, por peque√±os que sean", inverted: false },
                { text: "Tengo al menos una persona con quien puedo ser vulnerable y pedir apoyo", inverted: false },
                { text: "Pido ayuda cuando la necesito sin sentir que soy una carga", inverted: false },
                { text: "Mido mi progreso compar√°ndome con mi versi√≥n anterior, no con otras personas", inverted: false }
            ]
        };

        const pilarNames = {
            impulso: "NEURO-IMPULSO",
            focus: "NEURO-FOCUS",
            balance: "NEURO-BALANCE",
            influencia: "NEURO-FLOW"
        };

        const pilarSubtitles = {
            impulso: "Tu motor de acci√≥n y vitalidad f√≠sica",
            focus: "Tu claridad de prop√≥sito y presencia",
            balance: "Tu regulaci√≥n emocional y autocuidado",
            influencia: "Tu autenticidad y conexi√≥n con otros"
        };

        const pilarMaxScores = {
            impulso: 55,
            focus: 50,
            balance: 55,
            influencia: 60
        };

        let currentPilarIndex = 0;
        let pilares = Object.keys(questions);
        let answers = {};
        let userName = "";
        let userEmail = "";

        const scaleLabels = {
            1: "Totalmente en desacuerdo",
            2: "En desacuerdo",
            3: "Neutral",
            4: "De acuerdo",
            5: "Totalmente de acuerdo"
        };

        function getScaleOptions(answerId) {
            return [1, 2, 3, 4, 5].map(value => `
                <div class="scale-option">
                    <input type="radio" 
                           id="${answerId}_${value}" 
                           name="${answerId}" 
                           value="${value}"
                           onchange="updateAnswerCount()"
                           ${answers[answerId] == value ? 'checked' : ''}>
                    <label for="${answerId}_${value}">
                        ${scaleLabels[value]}
                    </label>
                </div>
            `);
        }

        function validateAndStartTest() {
            const nameInput = document.getElementById('userName');
            const emailInput = document.getElementById('userEmail');
            
            userName = nameInput.value.trim();
            userEmail = emailInput.value.trim();
            
            if (!userName) {
                alert('Por favor, ingresa tu nombre');
                nameInput.focus();
                return;
            }
            
            if (!userEmail) {
                alert('Por favor, ingresa tu correo electr√≥nico');
                emailInput.focus();
                return;
            }
            
            // Validaci√≥n b√°sica de email
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(userEmail)) {
                alert('Por favor, ingresa un correo electr√≥nico v√°lido');
                emailInput.focus();
                return;
            }
            
            startTest();
        }

        function startTest() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('testScreen').classList.remove('hidden');
            loadPilar(0);
        }

        function loadPilar(index) {
            currentPilarIndex = index;
            const pilar = pilares[index];
            const pilarQuestions = questions[pilar];
            
            let html = `
                <div class="section-header">
                    <div class="section-title">${pilarNames[pilar]}</div>
                    <div class="section-subtitle">${pilarSubtitles[pilar]}</div>
                </div>
            `;

            pilarQuestions.forEach((question, qIndex) => {
                const answerId = `${pilar}_${qIndex}`;
                
                html += `
                    <div class="question-card">
                        <div class="question-text">
                            <span class="question-number">${qIndex + 1}</span>
                            <span>${question.text}</span>
                        </div>
                        <div class="scale-container">
                            ${getScaleOptions(answerId).join('')}
                        </div>
                    </div>
                `;
            });

            document.getElementById('questionsContainer').innerHTML = html;
            updateProgress();
            updateButtons();
            updateAnswerCount();
        }

        function updateAnswerCount() {
            const pilar = pilares[currentPilarIndex];
            const pilarQuestions = questions[pilar];
            let count = 0;
            
            pilarQuestions.forEach((question, qIndex) => {
                const answerId = `${pilar}_${qIndex}`;
                if (document.querySelector(`input[name="${answerId}"]:checked`)) {
                    count++;
                }
            });
            
            document.getElementById('answeredCount').textContent = count;
            document.getElementById('totalQuestions').textContent = pilarQuestions.length;
            
            // Habilitar/deshabilitar bot√≥n siguiente
            const allAnswered = count === pilarQuestions.length;
            document.getElementById('nextBtn').disabled = !allAnswered;
        }

        function saveCurrentAnswers() {
            const pilar = pilares[currentPilarIndex];
            const pilarQuestions = questions[pilar];
            
            pilarQuestions.forEach((question, qIndex) => {
                const answerId = `${pilar}_${qIndex}`;
                const selected = document.querySelector(`input[name="${answerId}"]:checked`);
                if (selected) {
                    let value = parseInt(selected.value);
                    if (question.inverted) {
                        value = 6 - value;
                    }
                    answers[answerId] = value;
                }
            });
        }

        function nextPilar() {
            saveCurrentAnswers();
            
            if (currentPilarIndex < pilares.length - 1) {
                loadPilar(currentPilarIndex + 1);
            } else {
                showResults();
            }
        }

        function previousPilar() {
            saveCurrentAnswers();
            if (currentPilarIndex > 0) {
                loadPilar(currentPilarIndex - 1);
            }
        }

        function updateProgress() {
            const progress = ((currentPilarIndex + 1) / pilares.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentPilar').textContent = currentPilarIndex + 1;
        }

        function updateButtons() {
            document.getElementById('prevBtn').style.display = 
                currentPilarIndex === 0 ? 'none' : 'inline-block';
            document.getElementById('nextBtn').textContent = 
                currentPilarIndex === pilares.length - 1 ? 'Ver Resultados' : 'Siguiente ‚Üí';
        }

        function calculateResults() {
            const results = {};
            let totalScore = 0;
            
            pilares.forEach(pilar => {
                let pilarTotal = 0;
                let count = 0;
                
                questions[pilar].forEach((question, qIndex) => {
                    const answerId = `${pilar}_${qIndex}`;
                    if (answers[answerId]) {
                        pilarTotal += answers[answerId];
                        count++;
                    }
                });
                
                results[pilar] = {
                    score: pilarTotal,
                    maxScore: pilarMaxScores[pilar],
                    percentage: (pilarTotal / pilarMaxScores[pilar]) * 100
                };
                
                totalScore += pilarTotal;
            });
            
            results.total = totalScore;
            results.maxTotal = 220;
            results.totalPercentage = (totalScore / 220) * 100;
            
            return results;
        }

        function showResults() {
            document.getElementById('testScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            if (userName) {
                document.getElementById('userNameDisplay').textContent = userName;
                document.getElementById('ctaName').textContent = userName;
            }
            
            const results = calculateResults();
            
            // Convertir el total de 220 a escala de 100
            const totalOver100 = Math.round((results.total / 220) * 100);
            document.getElementById('totalScore').textContent = totalOver100;
            
            // Mostrar mensaje personalizado seg√∫n puntuaci√≥n
            showOverallMessage(totalOver100);
            
            // Crear gr√°fico radar
            createRadarChart(results);
            
            // Crear tarjetas resumen
            createPilarSummaries(results);
            
            // Crear an√°lisis detallado expandible
            createDetailedAnalysis(results);
        }

        function showOverallMessage(score) {
            let title, message;
            
            if (score < 25) {
                title = 'Tu sistema necesita una pausa compasiva';
                message = 'Has estado funcionando en modo supervivencia m√°s que en modo bienestar. Tu mente, tu cuerpo y tus emociones est√°n pidiendo descanso, contenci√≥n y direcci√≥n. Este resultado no habla de falta de capacidad, sino de agotamiento acumulado: tu sistema ha estado tratando de sostener demasiado por demasiado tiempo. Es momento de frenar, observar y empezar a reconstruir desde el autocuidado y la calma.';
            } else if (score < 50) {
                title = 'Est√°s resistiendo m√°s de lo que est√°s viviendo';
                message = 'Hay claridad y fortaleza en ti, pero tu bienestar a√∫n depende del esfuerzo constante. Tu energ√≠a se concentra en cumplir, m√°s que en disfrutar. Este nivel muestra un equilibrio fr√°gil: funcionas, pero no floreces. Tu cerebro y tu cuerpo necesitan recuperar ligereza, descanso y sentido para transformar la resistencia en fluidez.';
            } else if (score < 75) {
                title = 'Est√°s en equilibrio funcional, con espacio para expandirte';
                message = 'Has cultivado recursos valiosos: sabes regularte, actuar y sostenerte. Tu bienestar es real, pero a√∫n puede volverse m√°s profundo, m√°s estable y m√°s tuyo. Hay aspectos de ti que funcionan muy bien, y otros que solo necesitan refinamiento y coherencia. Este resultado habla de fortaleza en crecimiento, lista para consolidarse desde una presencia m√°s consciente.';
            } else {
                title = 'Tu bienestar se ha convertido en una forma de vivir';
                message = 'Has desarrollado una relaci√≥n madura con tu mente, tu cuerpo y tus emociones. Tu bienestar no es circunstancial: es un reflejo de tu autoconciencia y tu coherencia interna. Este nivel muestra un sistema bien regulado, flexible y con prop√≥sito. El siguiente paso no es hacer m√°s, sino integrar y compartir tu equilibrio como fuente de influencia positiva en otros.';
            }
            
            const messageHTML = `
                <h3 style="font-size: 1.1rem; font-weight: bold; color: #14233A; margin-bottom: 0.75rem;">
                    ${title}
                </h3>
                <p style="color: #4A4D53; line-height: 1.7; font-size: 0.95rem; text-align: left;">
                    ${message}
                </p>
            `;
            
            document.getElementById('overallMessage').innerHTML = messageHTML;
        }

        function createRadarChart(results) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            // Normalizar todos los pilares a escala de 25
            const normalizedScores = pilares.map(p => {
                const percentage = results[p].percentage;
                return (percentage / 100) * 25;  // Convertir porcentaje a escala de 25
            });
            
            const data = {
                labels: pilares.map(p => pilarNames[p]),
                datasets: [{
                    label: 'Tu Puntuaci√≥n',
                    data: normalizedScores,
                    backgroundColor: 'rgba(155, 109, 128, 0.2)',
                    borderColor: '#9B6D80',
                    borderWidth: 2,
                    pointBackgroundColor: '#9B6D80',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 5,
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#9B6D80',
                    pointHoverRadius: 7
                }]
            };
            
            new Chart(ctx, {
                type: 'radar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    layout: {
                        padding: {
                            top: 20,
                            right: 20,
                            bottom: 20,
                            left: 20
                        }
                    },
                    scales: {
                        r: {
                            min: 0,
                            max: 25,
                            ticks: {
                                stepSize: 5,
                                backdropColor: 'transparent',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: '#E6E2DE'
                            },
                            pointLabels: {
                                font: {
                                    size: 13,
                                    weight: 'bold'
                                },
                                color: '#14233A',
                                padding: 15
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.parsed.r.toFixed(1) + '/25 puntos';
                                }
                            }
                        }
                    }
                }
            });
        }

        
        function createPilarSummaries(results) {
            const container = document.getElementById('pilarSummaries');
            let html = '';
            
            pilares.forEach(pilar => {
                const result = results[pilar];
                const percentage = result.percentage;
                
                // NORMALIZAR A 25 PUNTOS
                const normalizedScore = ((percentage / 100) * 25).toFixed(1);
                
                const zone = getZone(percentage);
                const color = getZoneColor(zone);
                const label = getZoneLabel(zone);
                
                html += `
                    <div style="background: ${color}20; border: 2px solid ${color}; border-radius: 0.75rem; padding: 1rem;">
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                            <div style="flex: 1;">
                                <h3 style="font-weight: bold; font-size: 0.9rem; color: #14233A; margin-bottom: 0.25rem;">${pilarNames[pilar]}</h3>
                                <p style="font-size: 0.75rem; color: #4A4D53;">${pilarSubtitles[pilar]}</p>
                            </div>
                            <span style="font-size: 1.5rem; font-weight: bold; color: ${color};">
                                ${normalizedScore}/25
                            </span>
                        </div>
                        <div style="font-size: 0.75rem; font-weight: 600; color: ${color};">
                            ${label}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function createDetailedAnalysis(results) {
            const container = document.getElementById('detailedAnalysis');
            let html = '';
            
            pilares.forEach(pilar => {
                const result = results[pilar];
                const percentage = result.percentage;
                const zone = getZone(percentage);
                const color = getZoneColor(zone);
                const label = getZoneLabel(zone);
                const analysis = getPilarAnalysis(pilar, zone);
                
                html += `
                    <div style="background: ${color}20; border: 2px solid ${color}; border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="display: flex; align-items: start; justify-content: space-between; gap: 1rem; margin-bottom: 1rem; cursor: pointer;" onclick="togglePilar('${pilar}')">
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="width: 2rem; height: 2rem; background: ${color}; border-radius: 0.5rem;"></div>
                                <div>
                                    <h2 style="font-size: 1.5rem; font-weight: bold; color: #14233A; margin-bottom: 0.25rem;">
                                        ${pilarNames[pilar]}
                                    </h2>
                                    <p style="font-size: 0.9rem; color: #4A4D53;">
                                        ${((percentage / 100) * 25).toFixed(1)}/25 puntos ‚Ä¢ ${label}
                                    </p>
                                </div>
                            </div>
                            <button id="toggle-${pilar}" style="padding: 0.5rem; background: transparent; border: none; color: ${color}; cursor: pointer; font-size: 1.5rem;">
                                ‚ñº
                            </button>
                        </div>

                        <div id="content-${pilar}" style="display: none;">
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; margin-top: 1rem;">
                                <div style="margin-bottom: 1.5rem;">
                                    <h3 style="font-weight: bold; margin-bottom: 0.75rem; font-size: 1.1rem; color: #14233A;">
                                        Qu√© te dicen tus resultados
                                    </h3>
                                    <p style="line-height: 1.6; color: #4A4D53;">
                                        ${analysis.resultado}
                                    </p>
                                </div>

                                <div style="margin-bottom: 1.5rem;">
                                    <h3 style="font-weight: bold; margin-bottom: 0.75rem; font-size: 1.1rem; color: #14233A;">
                                        C√≥mo se manifiesta en tu vida
                                    </h3>
                                    <p style="line-height: 1.6; color: #4A4D53;">
                                        ${analysis.manifestacion}
                                    </p>
                                </div>

                                <div style="background: #F7F4F1; border-radius: 0.75rem; padding: 1.25rem; margin-bottom: 1.5rem;">
                                    <h3 style="font-weight: bold; margin-bottom: 0.75rem; font-size: 1.1rem; color: #14233A;">
                                        Qu√© podr√≠as empezar a trabajar por tu cuenta
                                    </h3>
                                    <ul style="list-style: none; padding: 0; margin: 0;">
                                        ${analysis.autocuidado.map(item => `
                                            <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 0.5rem;">
                                                <span style="width: 0.5rem; height: 0.5rem; background: ${color}; border-radius: 50%; margin-top: 0.5rem; flex-shrink: 0;"></span>
                                                <span style="color: #4A4D53;">${item}</span>
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>

                                <div style="background: ${color}20; border-left: 4px solid ${color}; border-radius: 0.75rem; padding: 1.25rem;">
                                    <h3 style="font-weight: bold; margin-bottom: 0.75rem; font-size: 1.1rem; color: #14233A;">
                                        üí´ C√≥mo NeuroWellness Learning puede ayudarte a transformarlo
                                    </h3>
                                    <p style="line-height: 1.6; color: #4A4D53;">
                                        ${analysis.programa}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function togglePilar(pilarId) {
            const content = document.getElementById(`content-${pilarId}`);
            const toggle = document.getElementById(`toggle-${pilarId}`);
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                toggle.textContent = '‚ñ≤';
            } else {
                content.style.display = 'none';
                toggle.textContent = '‚ñº';
            }
        }

        function getZone(percentage) {
            // Convertir porcentaje a puntuaci√≥n sobre 25
            const score = (percentage / 100) * 25;
            if (score >= 19) return 'green';
            if (score >= 13) return 'yellow';
            return 'red';
        }

        function getZoneColor(zone) {
            const colors = {
                green: '#9DB2A2',
                yellow: '#D6C79A',
                red: '#D99A8F'
            };
            return colors[zone];
        }

        function getZoneLabel(zone) {
            const labels = {
                green: 'Fortaleza Consolidada',
                yellow: 'Oportunidad de Desarrollo',
                red: 'Atenci√≥n Prioritaria'
            };
            return labels[zone];
        }

        function getPilarAnalysis(pilar, zone) {
            // Textos personalizados seg√∫n el pilar y la zona
            const analyses = {
                impulso: {
                    green: {
                        resultado: "Tu capacidad de acci√≥n est√° integrada. Conviertes intenciones en acciones de forma natural y sostenida. Has desarrollado un sistema interno que te permite iniciar, mantener y ajustar tu rumbo sin depender exclusivamente de la motivaci√≥n externa.",
                        manifestacion: "Act√∫as con fluidez. No necesitas que todo est√© perfecto para empezar, y cuando surge un obst√°culo, ajustas tu estrategia sin perder el impulso. Tu energ√≠a f√≠sica est√° disponible porque sabes c√≥mo cuidarla. La constancia no te agota: es parte de tu ritmo.",
                        autocuidado: [
                            "Mant√©n tu equilibrio entre desaf√≠o y recuperaci√≥n.",
                            "Comparte tus estrategias de acci√≥n con otros que necesiten inspiraci√≥n.",
                            "Observa si hay √°reas donde el exceso de acci√≥n pueda estar agotando otros pilares."
                        ],
                        programa: "En el programa profundizar√°s en la sostenibilidad de tu impulso. Aprender√°s a mantener tu energ√≠a sin caer en la sobreexigencia, y a expandir tu capacidad de acci√≥n hacia metas m√°s grandes sin perder tu centro. Tu fortaleza aqu√≠ puede convertirse en un modelo para otros pilares."
                    },
                    yellow: {
                        resultado: "Tu capacidad de acci√≥n est√° disponible, pero inestable. Alternas entre periodos de alta productividad y fases de desconexi√≥n o cansancio. Esto suele indicar un sistema dopamin√©rgico sensible: respondes a la emoci√≥n inicial, pero pierdes ritmo cuando la novedad se diluye.",
                        manifestacion: "Cumples con lo urgente, pero te cuesta sostener lo importante. Cuando todo fluye te sientes imparable, pero si aparece un obst√°culo, la motivaci√≥n cae bruscamente. Sabes lo que quieres, pero te agota sostener la constancia.",
                        autocuidado: [
                            "Definir dos tareas nucleares diarias y cerrar el d√≠a celebrando haberlas cumplido.",
                            "Revisar tu nivel de descanso antes de exigirte m√°s productividad.",
                            "Sustituir la pregunta '¬øpor qu√© no tengo ganas?' por '¬øqu√© necesito para recuperar mi energ√≠a?'."
                        ],
                        programa: "En el programa aprender√°s a convertir la motivaci√≥n en un h√°bito estable. A nivel neuropsicol√≥gico, equilibrar√°s la respuesta dopamin√©rgica para mantener constancia sin depender del entusiasmo inicial. A nivel vivencial, experimentar√°s c√≥mo la acci√≥n deja de sentirse como lucha y empieza a sentirse como fluidez."
                    },
                    red: {
                        resultado: "Tu sistema de acci√≥n est√° desconectado. La brecha entre lo que quieres hacer y lo que haces es amplia. Puede haber fatiga cr√≥nica, procrastinaci√≥n persistente o una sensaci√≥n de estar atrapada en la inercia. Tu cerebro est√° en modo supervivencia, no en modo construcci√≥n.",
                        manifestacion: "Postergas incluso lo que te importa. La culpa por no avanzar te pesa, pero esa culpa no se traduce en movimiento. Puede haber cansancio f√≠sico constante, patrones de sue√±o desregulados o la sensaci√≥n de que tu cuerpo 'no responde'.",
                        autocuidado: [
                            "Empieza con una sola acci√≥n m√≠nima diaria (5 minutos de movimiento, una tarea peque√±a).",
                            "Revisa tus patrones de descanso: la acci√≥n requiere energ√≠a disponible.",
                            "Busca apoyo profesional si sientes que la inmovilidad es persistente."
                        ],
                        programa: "En el programa trabajaremos desde la base: restaurar tu energ√≠a, reconectar con el placer de moverte y construir ritmos que tu sistema nervioso pueda sostener. No se trata de forzar acci√≥n, sino de recuperar tu capacidad natural de fluir."
                    }
                },
                focus: {
                    green: {
                        resultado: "Tu atenci√≥n est√° integrada. Puedes sostener el foco en lo importante sin perder tu centro. Has desarrollado claridad sobre tu prop√≥sito y esa claridad te gu√≠a en las decisiones cotidianas. Tu mente no es reactiva: es intencional.",
                        manifestacion: "Priorizas con facilidad. Sabes decir 'esto s√≠, esto no' sin culpa. Tu d√≠a tiene direcci√≥n, no dispersi√≥n. Disfrutas del presente sin desconectarte de tus metas. La atenci√≥n no te agota: te nutre.",
                        autocuidado: [
                            "Mant√©n espacios de reflexi√≥n regular para revisar tu direcci√≥n.",
                            "Cuida que la claridad no se convierta en rigidez.",
                            "Comparte tu proceso con otros que busquen m√°s enfoque."
                        ],
                        programa: "En el programa profundizar√°s en la maestr√≠a atencional. Aprender√°s a sostener foco en entornos cada vez m√°s complejos y a expandir tu presencia hacia dimensiones m√°s profundas de prop√≥sito y sentido."
                    },
                    yellow: {
                        resultado: "Tu foco aparece y desaparece como una luz intermitente. Hay d√≠as en los que est√°s completamente alineada con lo que haces y otros en los que te cuesta encontrar sentido o direcci√≥n. A nivel cerebral, esto indica un equilibrio parcial entre atenci√≥n sostenida y distracci√≥n reactiva.",
                        manifestacion: "Te organizas, pero pierdes energ√≠a en lo urgente. Terminas agotada por listas interminables y la sensaci√≥n de que no llegas a todo. Tienes metas, pero a veces se vuelven borrosas entre la rutina y la exigencia.",
                        autocuidado: [
                            "Distinguir entre 'lo importante' y 'lo inmediato' antes de empezar el d√≠a.",
                            "Incluir pausas breves de conciencia corporal entre tareas.",
                            "Recordar que cada decisi√≥n que tomas es una forma de elegir tu bienestar."
                        ],
                        programa: "En el programa entrenar√°s tu atenci√≥n como una forma de autocuidado. Aprender√°s a mantener la atenci√≥n estable incluso en contextos ca√≥ticos, fortaleciendo tu corteza prefrontal y tus redes de control cognitivo."
                    },
                    red: {
                        resultado: "Tu atenci√≥n est√° fragmentada. Vives en piloto autom√°tico, reaccionando a las demandas externas sin una br√∫jula interna clara. Puede haber confusi√≥n sobre lo que realmente quieres, o una desconexi√≥n profunda entre tu d√≠a a d√≠a y aquello que te da sentido.",
                        manifestacion: "Terminas los d√≠as sin saber qu√© hiciste. La sensaci√≥n de 'estar ocupada pero no avanzar' es constante. Puede haber dificultad para concentrarte, dispersi√≥n mental o una sensaci√≥n persistente de vac√≠o o falta de direcci√≥n.",
                        autocuidado: [
                            "Empieza el d√≠a con una pregunta: '¬øQu√© es lo m√°s importante hoy?'",
                            "Reduce la multitarea: haz una cosa a la vez, aunque sea por 10 minutos.",
                            "Busca momentos de silencio para reconectar con lo que realmente importa."
                        ],
                        programa: "En el programa reconstruiremos tu capacidad atencional desde cero. Aprender√°s a salir del piloto autom√°tico, a reconectar con tu prop√≥sito y a sostener foco sin agotarte. La claridad no es un lujo: es tu derecho."
                    }
                },
                balance: {
                    green: {
                        resultado: "Tu regulaci√≥n emocional est√° integrada. Puedes sentir sin ser arrastrada, observar sin juzgar y volver a tu centro sin esfuerzo. Tu sistema nervioso sabe moverse entre activaci√≥n y calma con fluidez.",
                        manifestacion: "Las emociones no te asustan. Puedes estar con la tristeza sin deprimirte, con el enojo sin explotar, con la alegr√≠a sin desconectarte. Tu cuerpo es un aliado, no un enemigo. Descansas bien y te recuperas r√°pido.",
                        autocuidado: [
                            "Mant√©n tus pr√°cticas de regulaci√≥n incluso cuando todo est√° bien.",
                            "Cuida de no cargar con las emociones de otros.",
                            "Comparte tus herramientas con quienes luchan por regularse."
                        ],
                        programa: "En el programa expandir√°s tu regulaci√≥n hacia niveles m√°s profundos. Aprender√°s a sostener calma incluso en crisis y a usar tu equilibrio como fuente de liderazgo emocional."
                    },
                    yellow: {
                        resultado: "Tu regulaci√≥n emocional es funcional, pero fr√°gil. Has aprendido a calmarte, aunque te cuesta sostener esa calma cuando la exigencia crece. Tu sistema nervioso alterna entre equilibrio y saturaci√≥n.",
                        manifestacion: "Sientes que manejas bien el estr√©s, pero hay d√≠as en que cualquier peque√±a cosa te sobrepasa. Te recuperas, s√≠, pero a costa de mucho esfuerzo. A veces, la mente racional entiende que todo est√° bien, pero el cuerpo no la cree.",
                        autocuidado: [
                            "Evitar 'guardar' la tensi√≥n: moverte, llorar, suspirar son formas naturales de descargar.",
                            "Introducir pausas antes de colapsar, no despu√©s.",
                            "Recordar que el equilibrio no es ausencia de emociones, sino capacidad de volver a tu centro."
                        ],
                        programa: "En el programa aprender√°s a entrenar la calma como una competencia interna. Desarrollar√°s mayor flexibilidad auton√≥mica: tu sistema nervioso aprender√° a pasar del modo alerta al modo calma sin perder energ√≠a."
                    },
                    red: {
                        resultado: "Tu sistema de regulaci√≥n est√° colapsado. Puede haber desregulaci√≥n cr√≥nica: ansiedad persistente, irritabilidad constante, o entumecimiento emocional. Tu cuerpo vive en modo alerta o, por el contrario, en apag√≥n total.",
                        manifestacion: "Peque√±as cosas te desbordan. Puedes pasar de 0 a 100 en segundos, o sentir que nada te toca. El descanso no repara: despiertas cansada. Tu cuerpo acumula tensi√≥n y no sabes c√≥mo soltarla.",
                        autocuidado: [
                            "Prioriza el sue√±o y el descanso por encima de la productividad.",
                            "Busca apoyo profesional: la desregulaci√≥n cr√≥nica necesita acompa√±amiento.",
                            "Practica respiraci√≥n consciente aunque sea 2 minutos al d√≠a."
                        ],
                        programa: "En el programa trabajaremos en restaurar tu sistema nervioso desde la base. No se trata de 'controlar' tus emociones, sino de recuperar la seguridad interna que permite sentir sin colapsar."
                    }
                },
                influencia: {
                    green: {
                        resultado: "Tu sistema de conexi√≥n est√° integrado. Tu tono vagal y tu empat√≠a cognitiva funcionan en armon√≠a: puedes sentir al otro sin perderte en √©l. Has desarrollado asertividad y compasi√≥n equilibradas.",
                        manifestacion: "Te expresas con serenidad, escuchas con presencia y sabes poner l√≠mites con respeto. Las relaciones no te quitan energ√≠a, te la devuelven. Eres percibida como alguien confiable, cercana y clara.",
                        autocuidado: [
                            "Seguir cultivando espacios donde puedas mostrar vulnerabilidad genuina.",
                            "Cuidar de no absorber m√°s de lo que puedes acompa√±ar.",
                            "Ense√±ar con el ejemplo: tu forma de comunicar es una herramienta de inspiraci√≥n."
                        ],
                        programa: "En el programa expandir√°s tu presencia relacional como fuente de influencia sana. Potenciar√°s la integraci√≥n entre empat√≠a, regulaci√≥n y liderazgo."
                    },
                    yellow: {
                        resultado: "Tu conexi√≥n relacional est√° disponible, pero condicionada. Puedes conectar profundamente, pero a veces pierdes tu centro en el proceso. Puede haber patrones de complacencia, dificultad para poner l√≠mites o tendencia a compararte con otros.",
                        manifestacion: "Te cuesta decir 'no' sin sentir culpa. Modificas tu comportamiento para evitar conflictos. Las redes sociales te generan m√°s malestar que disfrute. A veces das m√°s de lo que recibes y terminas agotada relacionalmente.",
                        autocuidado: [
                            "Practicar un 'no' semanal sin justificaciones.",
                            "Limitar el tiempo en redes sociales y observar c√≥mo te sientes despu√©s.",
                            "Buscar una relaci√≥n donde puedas ser completamente t√∫ sin m√°scaras."
                        ],
                        programa: "En el programa aprender√°s a conectar sin perderte. Desarrollar√°s l√≠mites saludables, comunicaci√≥n asertiva y la capacidad de estar en relaci√≥n sin sacrificar tu autenticidad."
                    },
                    red: {
                        resultado: "Tu sistema relacional est√° desconectado. Puede haber aislamiento, conflictos frecuentes, o relaciones que drenan m√°s de lo que nutren. La vulnerabilidad se siente peligrosa. La autenticidad, imposible.",
                        manifestacion: "Te cuesta pedir ayuda. Las relaciones cercanas son escasas o conflictivas. Puede haber soledad cr√≥nica o, por el contrario, relaciones superficiales que no te llenan. La comparaci√≥n con otros es dolorosa y constante.",
                        autocuidado: [
                            "Buscar una relaci√≥n terap√©utica: necesitas un espacio seguro para explorar la conexi√≥n.",
                            "Empezar con peque√±as dosis de vulnerabilidad en entornos seguros.",
                            "Limitar dr√°sticamente redes sociales si te generan malestar."
                        ],
                        programa: "En el programa reconstruiremos tu capacidad de conexi√≥n desde la seguridad. Aprender√°s que ser vulnerable no es ser d√©bil, y que poner l√≠mites no es ser ego√≠sta. La conexi√≥n aut√©ntica es posible."
                    }
                }
            };
            
            return analyses[pilar][zone];
        }

        function restartTest() {
            answers = {};
            currentPilarIndex = 0;
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.remove('hidden');
            document.getElementById('userName').value = '';
            document.getElementById('userEmail').value = '';
            userName = '';
            userEmail = '';
        }

        async function descargarPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Calcular resultados
            const results = calculateResults();
            const totalOver100 = Math.round((results.total / 220) * 100);
            
            // Colores
            const darkBlue = '#14233A';
            const rose = '#9B6D80';
            const lightRose = '#E9C8C8';
            
            // Logo/Header
            doc.setFillColor(20, 35, 58); // #14233A
            doc.rect(0, 0, 210, 40, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(24);
            doc.setFont(undefined, 'bold');
            doc.text('nw', 105, 15, { align: 'center' });
            
            doc.setFontSize(16);
            doc.text('Test de Neurobienestar RESPIRAR', 105, 25, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text('Tu Mapa de Bienestar Personal', 105, 33, { align: 'center' });
            
            // Informaci√≥n del usuario
            doc.setTextColor(20, 35, 58);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text(`Nombre: ${userName}`, 20, 50);
            doc.setFont(undefined, 'normal');
            doc.text(`Email: ${userEmail}`, 20, 57);
            doc.text(`Fecha: ${new Date().toLocaleDateString('es-ES')}`, 20, 64);
            
            // Puntuaci√≥n Total
            doc.setFillColor(233, 200, 200); // #E9C8C8
            doc.roundedRect(15, 72, 180, 30, 3, 3, 'F');
            
            doc.setTextColor(20, 35, 58);
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('PUNTUACI√ìN TOTAL', 105, 82, { align: 'center' });
            
            doc.setFontSize(28);
            doc.text(`${totalOver100}/100`, 105, 95, { align: 'center' });
            
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            doc.text('puntos de neurobienestar', 105, 100, { align: 'center' });
            
            // Mensaje personalizado
            let mensaje = '';
            if (totalOver100 < 25) {
                mensaje = 'Tu sistema necesita una pausa compasiva';
            } else if (totalOver100 < 50) {
                mensaje = 'Est√°s resistiendo m√°s de lo que est√°s viviendo';
            } else if (totalOver100 < 75) {
                mensaje = 'Est√°s en equilibrio funcional, con espacio para expandirte';
            } else {
                mensaje = 'Tu bienestar se ha convertido en una forma de vivir';
            }
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            const mensajeLines = doc.splitTextToSize(mensaje, 170);
            doc.text(mensajeLines, 105, 108, { align: 'center' });
            
            // Resultados por pilar
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('Tus 4 Pilares de Neurobienestar', 20, 125);
            
            let yPos = 135;
            
            pilares.forEach((pilar, index) => {
                const result = results[pilar];
                const percentage = result.percentage;
                const normalizedScore = ((percentage / 100) * 25).toFixed(1);
                const zone = getZone(percentage);
                const label = getZoneLabel(zone);
                
                // Color seg√∫n zona
                let color;
                if (zone === 'green') color = [157, 178, 162]; // #9DB2A2
                else if (zone === 'yellow') color = [214, 199, 154]; // #D6C79A
                else color = [217, 154, 143]; // #D99A8F
                
                // Fondo del pilar
                doc.setFillColor(color[0], color[1], color[2], 0.2);
                doc.roundedRect(15, yPos - 7, 180, 20, 2, 2, 'F');
                
                // Nombre del pilar
                doc.setTextColor(20, 35, 58);
                doc.setFontSize(11);
                doc.setFont(undefined, 'bold');
                doc.text(pilarNames[pilar], 20, yPos);
                
                // Puntuaci√≥n
                doc.setFontSize(14);
                doc.text(`${normalizedScore}/25`, 180, yPos, { align: 'right' });
                
                // Subt√≠tulo y clasificaci√≥n
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(74, 77, 83);
                doc.text(pilarSubtitles[pilar], 20, yPos + 5);
                
                doc.setFont(undefined, 'bold');
                doc.setTextColor(color[0], color[1], color[2]);
                doc.text(label, 180, yPos + 5, { align: 'right' });
                
                yPos += 25;
            });
            
            // Leyenda
            yPos += 5;
            doc.setFontSize(9);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(20, 35, 58);
            doc.text('Clasificaci√≥n:', 20, yPos);
            
            yPos += 6;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(8);
            
            // Verde
            doc.setFillColor(157, 178, 162);
            doc.circle(22, yPos - 1, 2, 'F');
            doc.text('19-25: Fortaleza Consolidada', 27, yPos);
            
            // Amarillo
            doc.setFillColor(214, 199, 154);
            doc.circle(72, yPos - 1, 2, 'F');
            doc.text('13-18: Oportunidad de Desarrollo', 77, yPos);
            
            // Rojo
            doc.setFillColor(217, 154, 143);
            doc.circle(142, yPos - 1, 2, 'F');
            doc.text('0-12: Atenci√≥n Prioritaria', 147, yPos);
            
            // Footer
            doc.setFontSize(8);
            doc.setTextColor(74, 77, 83);
            doc.text('¬© 2025 Maria Alejandra Urdaneta - Neurowellness Learning', 105, 285, { align: 'center' });
            doc.text('Este reporte es confidencial y de uso personal.', 105, 290, { align: 'center' });
            
            // Guardar PDF
            doc.save(`Resultados-Neurobienestar-${userName.replace(/\s+/g, '-')}.pdf`);
        }

        // ============================================
        // CONEXI√ìN CON GOOGLE DRIVE
        // ============================================

        // URL de tu Google Apps Script
        const GOOGLE_SCRIPT_URL = 'TU_URL_DEL_GOOGLE_SCRIPT_AQUI';

        // Modificar showResults para enviar datos autom√°ticamente
        const originalShowResults = showResults;
        showResults = function() {
            originalShowResults();
            enviarResultadosAGoogleDrive();
        };

        function enviarResultadosAGoogleDrive() {
            const results = calculateResults();
            const totalOver100 = Math.round((results.total / 220) * 100);
            
            const datos = {
                nombre: userName,
                email: userEmail,
                puntuacionTotal: totalOver100,
                neuroImpulso: ((results.impulso.percentage / 100) * 25).toFixed(1),
                neuroFocus: ((results.focus.percentage / 100) * 25).toFixed(1),
                neuroBalance: ((results.balance.percentage / 100) * 25).toFixed(1),
                neuroFlow: ((results.influencia.percentage / 100) * 25).toFixed(1),
                puntosTotales: results.total,
                respuestas: answers
            };
            
            // Enviar a Google Drive
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(datos)
            })
            .then(() => {
                console.log('‚úÖ Resultados guardados en Google Drive');
            })
            .catch((error) => {
                console.error('‚ùå Error al guardar:', error);
            });
        }
    </script>
</body>
</html>